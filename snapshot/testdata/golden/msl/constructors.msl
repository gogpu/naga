#include <metal_stdlib>
#include <simd/simd.h>

using metal::uint;

struct Foo {
    metal::float4 a;
    int b;
};

struct type_9 {
    int inner[4];
};

// Safe division helper (handles zero divisor)
template <typename T, typename D>
T _naga_div(T lhs, D rhs) {
    D nz = D(rhs != D(0));
    return lhs / (nz * rhs + D(!nz));
}

// Safe modulo helper (handles zero divisor)
template <typename T, typename D>
T _naga_mod(T lhs, D rhs) {
    D nz = D(rhs != D(0));
    return lhs % (nz * rhs + D(!nz));
}

kernel void main_() {
    Foo foo = Foo();
    
    foo = Foo{metal::float4(1.0, 1.0, 1.0, 1.0), 1};
}

